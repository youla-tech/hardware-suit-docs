(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1036:function(t,s,a){"use strict";a.r(s);var n=a(113),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发"}},[t._v("#")]),t._v(" 开发")]),t._v(" "),a("h2",{attrs:{id:"结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结构"}},[t._v("#")]),t._v(" 结构")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("│  .editorconfig\n│  .eslintignore\n│  .eslintrc.js\n│  .gitignore\n│  .gitlab-ci.yml\n│  .npmignore\n│  .prettierignore\n│  .releaserc.json\n│  CHANGELOG.md\n│  LICENSE\n│  package.json\n│  README.md\n│  t.txt\n│  tsconfig.json\n│  tslint.json\n│  webpack.config.js\n│  \n├─dist\n│      hardware-suit.js\n│      hardware-suit.js.map\n│      hardware-suit.min.js\n│      hardware-suit.min.js.map\n│      \n├─src\n│  │  extend.d.ts\n│  │  index.ts // 暴露套件\n│  │  \n│  ├─entity   // 实体状态类，用于解析、储存硬件设备状态码\n│  │  │  AirConditionModel.ts\n│  │  │  CardPowerStatus.ts\n│  │  │  ControlLampStatus.ts\n│  │  │  CurtainStatus.ts\n│  │  │  LampStatus.ts\n│  │  │  SensorAcmanStatus.ts\n│  │  │  SensorAcStatus.ts\n│  │  │  SensorDetectStatus.ts\n│  │  │  SocketStatus.ts\n│  │  │  Status.ts\n│  │  │  SwitchMixStatus.ts\n│  │  │  SwitchPlugStatus.ts\n│  │  │  SwitchStatus.ts\n│  │  │  WireConditionStatus.ts\n│  │  │  \n│  │  └─sensor // @deprecated 待整合\n│  │          HumiditySensorStatus.ts\n│  │          SensorStatus.ts\n│  │          \n│  ├─modules // 套件模块，用于执行硬件设备行为及获取状态描述\n│  │      AirConditionEquip.ts\n│  │      BaseEquip.ts\n│  │      CardPowerEquip.ts\n│  │      ControlLampEquip.ts\n│  │      CurtainEquip.ts\n│  │      HumidityEquip.ts\n│  │      LampEquip.ts\n│  │      LedLampEquip.ts\n│  │      SensorAcEquip.ts\n│  │      SensorAcmanEquip.ts\n│  │      SensorBedWetEquip.ts\n│  │      SensorCallEquip.ts\n│  │      SensorDoorEquip.ts\n│  │      SensorEquip.ts\n│  │      SensorGasEquip.ts\n│  │      SensorSmogEquip.ts\n│  │      SensorWaterEquip.ts\n│  │      SocketEquip.ts\n│  │      SwitchEquip.ts\n│  │      SwitchEquip1.ts\n│  │      SwitchMixEquip.ts\n│  │      SwitchPlugEquip.ts\n│  │      WireConditionEquip.ts\n│  │      \n│  ├─shared\n│  │      constant.ts\n│  │      \n│  ├─test\n│  │      Converter.spec.ts\n│  │      Descriptor.spec.ts\n│  │      LedLampEquip.spec.ts\n│  │      String.spec.ts\n│  │      TypeHints.spec.ts\n│  │      \n│  └─utils // 工具类\n│          converter.ts\n│          Descriptor.ts\n│          log.ts\n│          string.ts\n│          suiter.ts\n│          typeHints.ts\n            \n")])])]),a("h2",{attrs:{id:"结构说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结构说明"}},[t._v("#")]),t._v(" 结构说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("模块")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("entity")])]),t._v(" "),a("td",[t._v("实体状态类，用于解析、储存硬件设备状态码")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("modules")])]),t._v(" "),a("td",[t._v("套件模块，用于执行硬件设备行为及获取状态描述")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("utils")])]),t._v(" "),a("td",[t._v("工具类库")])])])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("文件")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("code",[t._v("converter")])]),t._v(" "),a("td",[t._v("进制转换器")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("Descriptor")])]),t._v(" "),a("td",[t._v("状态描述器，统一获取设备文本状态入口")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("typeHints")])]),t._v(" "),a("td",[t._v("检测器，用于判断设备类型")])]),t._v(" "),a("tr",[a("td",[a("code",[t._v("suiter")])]),t._v(" "),a("td",[t._v("套件配置，用于配置存储设备名称、设备类型码、设备分组等")])])])]),t._v(" "),a("h2",{attrs:{id:"开发一个硬件模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发一个硬件模块"}},[t._v("#")]),t._v(" 开发一个硬件模块")]),t._v(" "),a("h3",{attrs:{id:"_1-创建实体"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建实体"}},[t._v("#")]),t._v(" 1. 创建实体")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("entity")]),t._v(" 目录下创建硬件实体文件，如面板灯实体 "),a("code",[t._v("LampBoardStatus.ts")]),t._v("，继承状态实体基类 "),a("code",[t._v("Status")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Status "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./Status'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LampBoardStatus")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Status")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" state"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("slice")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStatus")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2-创建套件类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-创建套件类"}},[t._v("#")]),t._v(" 2. 创建套件类")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("modules")]),t._v(" 目录下创建一个硬件文件，如 "),a("code",[t._v("LampBoardEquip.ts")]),t._v("，继承套件基类 "),a("code",[t._v("BaseEquip")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" BaseEquip "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./BaseEquip'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" LampBoardStatus "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../entity/LampBoardStatus'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LampBoardEquip")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseEquip")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" bytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("{0}00000000000000")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("readonly")]),t._v(" lampBoardStatus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LampBoardStatus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("constructor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deviceType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deviceChildType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("super")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("status"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deviceType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" deviceChildType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n      * 获取状态字节码串\n     */")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getbytes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n      *  获取设备状态描述\n     */")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getStatusDescriptor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n     "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-将设备状态添加至状态描述器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-将设备状态添加至状态描述器"}},[t._v("#")]),t._v(" 3. 将设备状态添加至状态描述器")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("utils/Descriptor.ts")]),t._v(" 中对应的设备类模块下(如传感器类)，加入返回该设备状态。细节查看 "),a("RouterLink",{attrs:{to:"/guide/tools/descriptor.html"}},[a("code",[t._v("状态描述器")])])],1),t._v(" "),a("h3",{attrs:{id:"_4-导出套件类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-导出套件类"}},[t._v("#")]),t._v(" 4. 导出套件类")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("index.ts")]),t._v(" 文件中导出套件类，以便对外使用。")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./modules/LampBoardEquip'")]),t._v("\n")])])]),a("h2",{attrs:{id:"命名规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命名规范"}},[t._v("#")]),t._v(" 命名规范")]),t._v(" "),a("ul",[a("li",[t._v("实体和套件类命名均需首字母大写，如 "),a("code",[t._v("LampBoardStatus")]),t._v("，"),a("code",[t._v("LampBoardEquip")])]),t._v(" "),a("li",[t._v("命名规则： "),a("code",[t._v("[主类型][子类型][约定后缀]")]),t._v(", 如 "),a("code",[t._v("SensorAcStatus")]),t._v("， "),a("code",[t._v("SensorAcEquip")])])]),t._v(" "),a("h3",{attrs:{id:"实体类型命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实体类型命名"}},[t._v("#")]),t._v(" 实体类型命名")]),t._v(" "),a("p",[t._v("实体类命名,均需以 "),a("code",[t._v("Status")]),t._v(" 结尾")]),t._v(" "),a("h3",{attrs:{id:"套件类命名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#套件类命名"}},[t._v("#")]),t._v(" 套件类命名")]),t._v(" "),a("p",[t._v("套件类命名，均需以 "),a("code",[t._v("Equip")]),t._v(" 结尾")])])}),[],!1,null,null,null);s.default=e.exports}}]);